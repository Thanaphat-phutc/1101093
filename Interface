<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RVM Interface - Advanced Material Sorting (Interactive)</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700;800&display=swap" rel="stylesheet">
    <style>
        /* ------------------ Base & Variables ------------------ */
        :root {
            --color-primary: #00897B; /* Teal Green - Elegance */
            --color-secondary: #FFB300; /* Amber Gold */
            --color-light-bg: #E0F7FA; /* Light Teal/Cyan Background */
            --color-soft-bg: #F4F6F9; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≠ Soft UI */
            --color-dark-text: #263238;
            --color-shadow-dark: rgba(140, 153, 166, 0.4);
            --color-shadow-light: rgba(255, 255, 255, 0.8);
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(145deg, var(--color-light-bg), #B2EBF2);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .screen-container {
            width: 100%;
            max-width: 480px;
            height: 800px;
            background-color: var(--color-soft-bg);
            border-radius: 35px;
            box-shadow: 10px 10px 30px var(--color-shadow-dark), 
                        -10px -10px 30px var(--color-shadow-light);
            position: relative;
            overflow: hidden;
        }

        .screen {
            width: 100%;
            height: 100%;
            padding: 40px 35px;
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
            display: none; 
            flex-direction: column;
            justify-content: space-between;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            color: var(--color-dark-text);
            pointer-events: none; 
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
        .screen.show { 
            display: flex; 
            opacity: 1; 
            transform: translateX(0); 
            pointer-events: all;
        }
        .screen:not(.show) { opacity: 0; transform: translateX(100%); }

        .header {
            color: var(--color-primary);
            font-size: 38px;
            font-weight: 800;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 1px 1px 1px var(--color-shadow-light);
        }

        /* --- Global CTA Styling for Soft UI --- */
        .main-cta {
            width: 100%;
            padding: 22px;
            border: none;
            border-radius: 20px;
            font-size: 22px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 6px 6px 12px var(--color-shadow-dark), 
                        -6px -6px 12px var(--color-shadow-light);
        }

        .main-cta:active {
            box-shadow: inset 4px 4px 8px var(--color-shadow-dark), 
                        inset -4px -4px 8px var(--color-shadow-light);
            transform: scale(0.99);
        }
        
        /* ------------------ Screen 1: Welcome & Login ------------------ */
        #welcome-screen .content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        #welcome-screen .icon { font-size: 110px; margin-bottom: 10px; }
        #welcome-screen .headline { font-size: 44px; font-weight: 800; color: var(--color-dark-text); margin-bottom: 15px; }

        #welcome-screen .main-cta {
            background-color: var(--color-primary);
            color: white;
            margin-top: 60px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        #login-screen h2 { font-size: 26px; color: var(--color-dark-text); margin-bottom: 30px; }
        #phone-input {
            width: 100%; padding: 18px; font-size: 28px; text-align: center; border: none; border-radius: 15px; margin-bottom: 15px; background-color: var(--color-soft-bg);
            box-shadow: inset 4px 4px 8px var(--color-shadow-dark), inset -4px -4px 8px var(--color-shadow-light);
        }
        #login-error { color: #E53935; font-size: 18px; margin-top: 10px; height: 25px; font-weight: 700; }
        #login-screen .main-cta { background-color: var(--color-secondary); color: var(--color-dark-text); margin-top: 30px; }


        /* ------------------ Screen 3: Type Selection & Sub Selection ------------------ */
        #type-selection-screen .options, #glass-sub-selection-screen .options, #plastic-sub-selection-screen .options { 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            width: 100%; 
            margin-top: 20px; 
        }
        
        .type-button, .sub-type-button {
            width: 100%;
            padding: 25px 20px; 
            border: none;
            border-radius: 25px;
            font-size: 22px; 
            font-weight: 800;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease-in-out;
            box-shadow: 6px 6px 12px var(--color-shadow-dark), -6px -6px 12px var(--color-shadow-light);
            text-align: center;
        }
        .type-button .price-info { font-size: 16px; font-weight: 400; opacity: 0.9; display: block; margin-top: 5px; }

        .sub-type-button {
            padding: 25px 20px;
            font-size: 22px;
            text-align: center;
        }

        .type-button:active, .sub-type-button:active { 
            box-shadow: inset 4px 4px 8px var(--color-shadow-dark), inset -4px -4px 8px var(--color-shadow-light);
            transform: scale(0.99);
        }

        /* ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å */
        .btn-glass { background: linear-gradient(135deg, #78909C, #546E7A); } 
        .btn-plastic { background: linear-gradient(135deg, #42A5F5, #2196F3); } /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Plastic ‡∏´‡∏•‡∏±‡∏Å */
        .btn-can { background: linear-gradient(135deg, #BDBDBD, #9E9E9E); } 

        /* ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡πà‡∏≠‡∏¢‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å */
        .btn-pet { background: linear-gradient(135deg, #4DB6AC, #26A69A); } /* Teal (PET ‡πÉ‡∏™) */
        .btn-hdpe { background: linear-gradient(135deg, #FFD54F, #FFC107); } /* Amber Gold (HDPE ‡∏Ç‡∏∏‡πà‡∏ô) */

        /* Glass Sub-Type Styles */
        .btn-sub-glass-1 { background: linear-gradient(135deg, #CFD8DC, #90A4AE); color: var(--color-dark-text); } 
        .btn-sub-glass-2 { background: linear-gradient(135deg, #66BB6A, #4CAF50); } 
        .btn-sub-glass-3 { background: linear-gradient(135deg, #FFB74D, #FF9800); } 
        .btn-sub-glass-4 { background: linear-gradient(135deg, #546E7A, #37474F); } 


        /* ------------------ Screen 4: Processing ------------------ */
        #processing-screen .counter-area { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #processing-screen .count { font-size: 200px; font-weight: 800; color: var(--color-primary); line-height: 1; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); }
        
        #processing-screen .value { font-size: 38px; font-weight: 800; color: var(--color-secondary); margin-top: 15px; }
        #processing-screen .status-msg { font-size: 20px; color: #E53935; margin-top: 25px; font-weight: 700; }
        #processing-screen .main-cta { background-color: var(--color-secondary); color: var(--color-dark-text); }
        
        /* ------------------ Reward / Payment / Thank You (Styles) ------------------ */
        .selection-button { 
            width: 100%; padding: 25px; border: none; border-radius: 20px; text-align: left; color: white; 
            box-shadow: 6px 6px 12px var(--color-shadow-dark), -6px -6px 12px var(--color-shadow-light); margin-bottom: 20px; cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .btn-payment { background: linear-gradient(90deg, #66BB6A, #4CAF50); }
        .btn-coupon { background: linear-gradient(90deg, #42A5F5, #2196F3); }
        .btn-donation { background: linear-gradient(90deg, #AB47BC, #8E24AA); }
        
        .button-label { font-size: 24px; font-weight: 800; display: block; margin-bottom: 5px; }
        .button-desc { font-size: 16px; opacity: 0.9; font-weight: 400; }
        .cancel-btn { 
            background-color: var(--color-soft-bg) !important; color: var(--color-dark-text) !important; 
            box-shadow: 6px 6px 12px var(--color-shadow-dark), -6px -6px 12px var(--color-shadow-light) !important; 
            font-weight: 400 !important; 
        }
    </style>
</head>
<body>

<div class="screen-container">

    <div id="welcome-screen" class="screen show">
        <div class="header">Refun Machine</div>
        <div class="content">
            <div class="icon">‚ôªÔ∏è</div>
            <div class="headline">‡∏Ñ‡∏∑‡∏ô‡∏Ç‡∏ß‡∏î‡∏™‡∏π‡πà‡πÇ‡∏•‡∏Å‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô</div>
            <p class="info" style="color: var(--color-dark-text); font-size: 18px;">
                ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô
            </p>
        </div>
        <button class="main-cta" onclick="navigate('login-screen')">
            ‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        </button>
    </div>

    <div id="login-screen" class="screen">
        <div class="header">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>
        <div class="content">
            <div class="icon">üì±</div>
            <h2>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</h2>
            <input type="number" id="phone-input" placeholder="08XXXXXXXX" maxlength="10" />
            <div id="login-error"></div>
        </div>
        <button class="main-cta" onclick="handleLogin()">
            ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
        </button>
    </div>

    <div id="type-selection-screen" class="screen">
        <div class="header">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</div>
        <div class="content">
            <p style="font-size: 20px; color: var(--color-dark-text); margin-bottom: 40px; font-weight: 700;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</p>
            
            <div class="options">
                <button class="type-button btn-glass" onclick="navigate('glass-sub-selection-screen')">
                    <span style="font-size: 35px;">ü•Ç</span> **‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß (Glass)** <span class="price-info">(‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢)</span>
                </button>
                
                <button class="type-button btn-plastic" onclick="navigate('plastic-sub-selection-screen')">
                    <span style="font-size: 35px;">‚ôªÔ∏è</span> **‡∏Ç‡∏ß‡∏î‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å (Plastic)**
                    <span class="price-info">(‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÉ‡∏™/‡∏Ç‡∏∏‡πà‡∏ô)</span>
                </button>
                
                <button class="type-button btn-can" onclick="selectTypeAndStart('CAN')">
                    <span style="font-size: 35px;">ü•´</span> **‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á (Can)**
                    <span class="price-info">üí∞ **~0.70 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
            </div>
        </div>
        <button class="main-cta cancel-btn" onclick="navigate('welcome-screen')">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
        </button>
    </div>

    <div id="plastic-sub-selection-screen" class="screen">
        <div class="header">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</div>
        <div class="content">
            <p style="font-size: 20px; color: var(--color-dark-text); margin-bottom: 20px; font-weight: 700;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏≠‡∏î</p>
            
            <div class="options">
                <button class="sub-type-button btn-pet" onclick="selectTypeAndStart('PET')">
                    <span class="button-label">üß¥ ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÉ‡∏™ (PET)</span>
                    <span class="button-desc">üí∞ **9-11 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å. (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 10.00 ‡∏ö‡∏≤‡∏ó)**</span>
                </button>
                <button class="sub-type-button btn-hdpe" onclick="selectTypeAndStart('HDPE')">
                    <span class="button-label">ü•õ ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏Ç‡∏∏‡πà‡∏ô (HDPE)</span>
                    <span class="button-desc">üí∞ **‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 13.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
            </div>
        </div>
        <button class="main-cta cancel-btn" onclick="navigate('type-selection-screen')">
            üîô ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å
        </button>
    </div>


    <div id="glass-sub-selection-screen" class="screen">
        <div class="header">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß</div>
        <div class="content">
            <p style="font-size: 20px; color: var(--color-dark-text); margin-bottom: 20px; font-weight: 700;">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏Å‡∏¥‡πÇ‡∏•‡∏Å‡∏£‡∏±‡∏° (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô/‡∏Ç‡∏ß‡∏î)</p>
            
            <div class="options">
                <button class="sub-type-button btn-sub-glass-1" onclick="selectTypeAndStart('GLASS_CLEAR')">
                    <span class="button-label">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏™‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</span>
                    <span class="button-desc">üí∞ **2.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
                <button class="sub-type-button btn-sub-glass-2" onclick="selectTypeAndStart('GLASS_GREEN_ALCOHOL')">
                    <span class="button-label">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏™ (‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå)</span>
                    <span class="button-desc">üí∞ **15.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
                <button class="sub-type-button btn-sub-glass-3" onclick="selectTypeAndStart('GLASS_BROWN_ALCOHOL')">
                    <span class="button-label">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡∏ä‡∏≤‡πÉ‡∏™ (‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå)</span>
                    <span class="button-desc">üí∞ **11.00 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
                <button class="sub-type-button btn-sub-glass-4" onclick="selectTypeAndStart('GLASS_BROWN_ENERGY')">
                    <span class="button-label">‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡∏ä‡∏≤‡πÉ‡∏™ (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏ä‡∏π‡∏Å‡∏≥‡∏•‡∏±‡∏á)</span>
                    <span class="button-desc">üí∞ **1.50 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.**</span>
                </button>
            </div>
        </div>
        <button class="main-cta cancel-btn" onclick="navigate('type-selection-screen')">
            üîô ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å
        </button>
    </div>

    <div id="processing-screen" class="screen">
        <div class="header">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</div>
        
        <div class="counter-area">
            <div class="count" id="item-count">0</div>
            <div class="value" id="total-value">‡∏£‡∏ß‡∏°: 0.00 ‡∏ö‡∏≤‡∏ó</div>
            <div class="status-msg" id="processing-status">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏´‡∏¢‡∏≠‡∏î‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏±‡∏ö</div>
            <p style="margin-top: 20px; font-weight: 800; color: var(--color-primary);" id="selected-type-display"></p>
        </div>
        
        <button class="main-cta" onclick="finishTransaction()">
            ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
        </button>
    </div>

    <div id="reward-selection-screen" class="screen">
        <div class="header">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</div>
        
        <div class="content" style="gap: 15px;">
            <p class="summary-text" style="color: var(--color-dark-text); text-align: center; font-weight: 700; margin-bottom: 20px;">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏∞‡∏™‡∏°: <span class="summary-value" id="reward-summary-value" style="font-size: 28px; color: var(--color-primary); font-weight: 800;">0.00 ‡∏ö‡∏≤‡∏ó</span></p>

            <button class="selection-button btn-payment" onclick="showPaymentScreen()">
                <span class="button-label">‚úÖ ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ E-Wallet</span>
                <span class="button-desc">‡∏™‡πÅ‡∏Å‡∏ô QR Code (PromptPay / TrueMoney)</span>
            </button>

            <button class="selection-button btn-coupon" onclick="alert('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î...'); navigate('thank-you-screen')">
                <span class="button-label">üßæ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
                <span class="button-desc">‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
            </button>

            <button class="selection-button btn-donation" onclick="navigate('thank-you-screen')">
                <span class="button-label">‚ù§Ô∏è ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏∏‡∏®‡∏•</span>
                <span class="button-desc">‡∏°‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏∞‡∏™‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏´‡πâ‡∏°‡∏π‡∏•‡∏ô‡∏¥‡∏ò‡∏¥‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°</span>
            </button>
        </div>
        
        <button class="main-cta cancel-btn" onclick="navigate('welcome-screen')">
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        </button>
    </div>

    <div id="payment-screen" class="screen">
        <div class="header">‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÇ‡∏≠‡∏ô</div>
        
        <div class="qr-area content" style="justify-content: center;">
            <div class="qr-code" style="height: 250px; width: 250px; background-color: #546E7A; margin: 20px auto; border-radius: 10px;"></div>
            <div class="instruction" style="color: var(--color-dark-text); font-size: 18px; font-weight: 500;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡πÅ‡∏≠‡∏õ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</div>
            <div class="success-msg" id="payment-status" style="font-size: 30px; font-weight: 800; color: var(--color-primary); margin-top: 20px;">0.00 ‡∏ö‡∏≤‡∏ó</div>
        </div>
        
        <button class="main-cta" style="background-color: var(--color-primary); color: white;" onclick="navigate('thank-you-screen')">
            ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
        </button>
    </div>

    <div id="thank-you-screen" class="screen">
        <div class="header"></div>
        <div class="content" style="justify-content: center;">
            <div class="icon">üèÜ</div>
            <div class="thanks-msg" style="font-size: 40px; font-weight: 800; color: var(--color-primary);">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!</div>
            <p style="font-size: 20px; color: var(--color-dark-text); font-weight: 500; text-align: center;">
                ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß
            </p>
        </div>
        
        <button class="main-cta" style="background-color: var(--color-primary); color: white;" onclick="navigate('welcome-screen')">
            ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        </button>
    </div>

</div>

<script>
    let currentTotalValue = 0.00;
    let detectionTimer = null;
    let selectedType = '';
    let itemCount = 0;
    
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
    const VALUE_MAP = {
        'GLASS_CLEAR': 2.00, 
        'GLASS_GREEN_ALCOHOL': 15.00, 
        'GLASS_BROWN_ALCOHOL': 11.00, 
        'GLASS_BROWN_ENERGY': 1.50, 
        'PET': 10.00, // ‡πÉ‡∏ä‡πâ 10 ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å. ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
        'HDPE': 13.00, 
        'CAN': 0.70 
    };

    // Mapping ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• 
    const TYPE_DISPLAY_MAP = {
        'GLASS_CLEAR': '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡πÉ‡∏™‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',
        'GLASS_GREEN_ALCOHOL': '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÉ‡∏™ (‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå)',
        'GLASS_BROWN_ALCOHOL': '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡∏ä‡∏≤‡πÉ‡∏™ (‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå)',
        'GLASS_BROWN_ENERGY': '‡∏Ç‡∏ß‡∏î‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏µ‡∏ä‡∏≤‡πÉ‡∏™ (‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏ä‡∏π‡∏Å‡∏≥‡∏•‡∏±‡∏á)',
        'PET': '‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÉ‡∏™ (PET)',
        'HDPE': '‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏Ç‡∏∏‡πà‡∏ô (HDPE)',
        'CAN': '‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á (Can)'
    };
    
    // ************************ 1. Navigation Logic ************************
    
    function navigate(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('show');
        });
        
        const targetScreen = document.getElementById(screenId);
        if (targetScreen) {
            targetScreen.classList.add('show');
        }

        if (screenId === 'processing-screen') {
            startDetectionSimulation();
        } else if (screenId === 'reward-selection-screen') {
            document.getElementById('reward-summary-value').textContent = currentTotalValue.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
            stopDetectionSimulation();
        } else if (screenId === 'welcome-screen') {
             currentTotalValue = 0.00;
             itemCount = 0;
             selectedType = '';
        }
    }

    // ************************ 2. Login Logic ************************

    function handleLogin() {
        const phoneInput = document.getElementById('phone-input');
        const errorDisplay = document.getElementById('login-error');
        
        if (phoneInput.value.length === 10 && !isNaN(phoneInput.value)) {
            errorDisplay.textContent = '‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
            setTimeout(() => {
                navigate('type-selection-screen');
                errorDisplay.textContent = '';
                phoneInput.value = ''; 
            }, 800);
        } else {
            errorDisplay.textContent = '‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå 10 ‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
        }
    }

    // ************************ 3. Type Selection Logic ************************
    
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏¢‡πà‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏¢‡∏≠‡∏î
    function selectTypeAndStart(type) {
        selectedType = type;
        
        // ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å VALUE_MAP ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        const displayPrice = VALUE_MAP[selectedType].toFixed(2);
        const typeName = TYPE_DISPLAY_MAP[selectedType];
        
        document.getElementById('selected-type-display').textContent = `‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${typeName} (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ${displayPrice} ‡∏ö‡∏≤‡∏ó/‡∏Å‡∏Å.)`;
        
        navigate('processing-screen');
    }

    // ************************ 4. Processing Logic (Simulation) ************************
    
    function startDetectionSimulation() {
        itemCount = 0;
        currentTotalValue = 0.00;
        updateProcessingDisplay();
        
        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
        document.getElementById('processing-screen').querySelector('.main-cta').style.backgroundColor = 'var(--color-secondary)';
        document.getElementById('processing-screen').querySelector('.main-cta').textContent = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•';

        
        detectionTimer = setInterval(() => {
            // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ 1 ‡∏ä‡∏¥‡πâ‡∏ô (‡∏Ç‡∏ß‡∏î/‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á) ‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 0.15 ‡∏Å‡∏Å.
            const weightPerItem = 0.15; 
            const valuePerItem = VALUE_MAP[selectedType] * weightPerItem;
            
            itemCount++;
            currentTotalValue += valuePerItem;
            
            updateProcessingDisplay();
            
            if (itemCount >= 5) {
                document.getElementById('processing-status').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠... ‡∏´‡∏≤‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•"';
                document.getElementById('processing-screen').querySelector('.main-cta').style.backgroundColor = 'var(--color-primary)';
                
            } else {
                document.getElementById('processing-status').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏´‡∏¢‡∏≠‡∏î‡∏ï‡πà‡∏≠';
            }
        }, 2000); 
    }

    function stopDetectionSimulation() {
        clearInterval(detectionTimer);
        detectionTimer = null;
    }

    function updateProcessingDisplay() {
        document.getElementById('item-count').textContent = itemCount;
        document.getElementById('total-value').textContent = `‡∏£‡∏ß‡∏°: ${currentTotalValue.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
    }

    function finishTransaction() {
        if (itemCount > 0) {
            stopDetectionSimulation();
            navigate('reward-selection-screen');
        } else {
            document.getElementById('processing-status').textContent = '‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏≠‡∏î‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏´‡∏¢‡∏≠‡∏î‡∏Å‡πà‡∏≠‡∏ô';
        }
    }

    // ************************ 5. Reward/Payment Logic ************************
    
    function showPaymentScreen() {
        document.getElementById('payment-status').textContent = currentTotalValue.toFixed(2) + ' ‡∏ö‡∏≤‡∏ó';
        navigate('payment-screen');
    }


    // ************************ 6. Initial Load ************************
    
    document.addEventListener('DOMContentLoaded', () => {
        navigate('welcome-screen'); 
    });
</script>

</body>
</html>
